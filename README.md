
-----

# π›΅οΈ ShieldHub Backend

[](https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html)
[](https://spring.io/projects/spring-boot)
[](https://www.mysql.com/)
[](https://www.docker.com/)

> νμΌ λ³΄μ•κ³Ό μ›Ή μ·¨μ•½μ  λ¶„μ„μ„ μ κ³µν•λ” ν†µν•© λ³΄μ• μ†”λ£¨μ… λ°±μ—”λ“ μ„λ²„

<br>

## π“ λ©μ°¨

1.  [ν”„λ΅μ νΈ μ†κ°](https://www.google.com/search?q=%23-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%86%8C%EA%B0%9C)
2.  [μ£Όμ” κΈ°λ¥](https://www.google.com/search?q=%23-%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5)
3.  [κΈ°μ  μ¤νƒ](https://www.google.com/search?q=%23-%EA%B8%B0%EC%88%A0-%EC%8A%A4%ED%83%9D)
4.  [λΉ λ¥Έ μ‹μ‘](https://www.google.com/search?q=%23-%EB%B9%A0%EB%A5%B8-%EC%8B%9C%EC%9E%91)
5.  [API λ¬Έμ„](https://www.google.com/search?q=%23-api-%EB%AC%B8%EC%84%9C)
6.  [ν”„λ΅μ νΈ κµ¬μ΅°](https://www.google.com/search?q=%23-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B5%AC%EC%A1%B0)
7.  [λ³΄μ• κΈ°λ¥](https://www.google.com/search?q=%23-%EB%B3%B4%EC%95%88-%EA%B8%B0%EB%8A%A5)
8.  [λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§](https://www.google.com/search?q=%23-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%8A%A4%ED%82%A4%EB%A7%88)
9.  [κ°λ° μ§„ν–‰ μƒν™©](https://www.google.com/search?q=%23-%EA%B0%9C%EB%B0%9C-%EC%A7%84%ED%96%89-%EC%83%81%ED%99%A9)

<br>

## π“ ν”„λ΅μ νΈ μ†κ°

**ShieldHub**λ” λ―Όκ°ν• νμΌμ„ μ•μ „ν•κ² λ³΄νΈν•κ³  κ΄€λ¦¬ν•κΈ° μ„ν• λ°±μ—”λ“ μ‹μ¤ν…μ…λ‹λ‹¤. AES-256-GCM μ΄μ¤‘ μ•”νΈν™” μ‹μ¤ν…μ„ ν†µν•΄ κ°•λ ¥ν• νμΌ λ³΄μ•μ„ μ κ³µν•λ©°, JWTμ™€ OTP/2FAλ¥Ό κ²°ν•©ν• λ‹¤μ¤‘ μΈμ¦ μ²΄κ³„λ΅ μ‚¬μ©μ κ³„μ •μ„ μ•μ „ν•κ² λ³΄νΈν•©λ‹λ‹¤.

### β¨ ν•µμ‹¬ νΉμ§•

* **κ°•λ ¥ν• νμΌ μ•”νΈν™”**: νμΌλ³„ κ³ μ  ν‚¤μ™€ λ§μ¤ν„° ν‚¤λ¥Ό μ‚¬μ©ν•λ” **AES-256-GCM μ΄μ¤‘ μ•”νΈν™”** μ‹μ¤ν…
* **λ‹¤μ¤‘ μΈμ¦ μ‹μ¤ν…**: **JWT** ν† ν° μΈμ¦κ³Ό **OTP/2FA**λ¥Ό κ²°ν•©ν•μ—¬ λ†’μ€ μμ¤€μ κ³„μ • λ³΄μ• μ κ³µ
* **λ¬΄κ²°μ„± λ³΄μ¥**: **SHA-256** ν•΄μ‹ κ²€μ¦μ„ ν†µν•΄ νμΌμ μ„λ³€μ΅° μ—¬λ¶€λ¥Ό ν™•μΈ
* **μ‚¬μ©μλ³„ κ²©λ¦¬**: λ¨λ“  νμΌκ³Ό κ΄€λ ¨ λ°μ΄ν„°λ” μ‚¬μ©μλ³„λ΅ μ™„λ²½ν κ²©λ¦¬λμ–΄ κ΄€λ¦¬

-----

## π€ μ£Όμ” κΈ°λ¥

### π” λ³΄μ• μΈμ¦ μ‹μ¤ν…

* β… JWT κΈ°λ° ν† ν° μΈμ¦ (Access/Refresh)
* β… BCryptλ¥Ό μ‚¬μ©ν• λΉ„λ°€λ²νΈ λ‹¨λ°©ν–¥ μ•”νΈν™”
* β… Google Authenticator μ—°λ™ OTP/2FA 2λ‹¨κ³„ μΈμ¦
* β… νμ›κ°€μ…, λ΅κ·ΈμΈ, λ΅κ·Έμ•„μ›ƒ κΈ°λ¥
* β… μ•μ „ν• λΉ„λ°€λ²νΈ λ³€κ²½ λ° μ¬μ„¤μ •
* β… μ΄λ©”μΌ κΈ°λ° μ„μ‹ λΉ„λ°€λ²νΈ λ°κΈ‰

### π“ νμΌ λ³΄μ• μ‹μ¤ν…

* β… **AES-256-GCM**μ„ μ‚¬μ©ν• κ°•λ ¥ν• νμΌ μ•”νΈν™”/λ³µνΈν™”
* β… νμΌ ν‚¤ + λ§μ¤ν„° ν‚¤λ¥Ό μ΄μ©ν• **μ΄μ¤‘ μ•”νΈν™”**λ΅ ν‚¤ κ΄€λ¦¬ λ³΄μ• κ°•ν™”
* β… **SHA-256** ν•΄μ‹λ¥Ό μ΄μ©ν• νμΌ λ¬΄κ²°μ„± κ²€μ¦
* β… μ•”νΈν™”λ νμΌκ³Ό ν‚¤, μ •λ³΄λ¥Ό ν•λ‚μ **ZIP**μΌλ΅ ν¨ν‚¤μ§•
* β… νμΌ μ•”νΈν™”/λ³µνΈν™” μ΄λ ¥ κ΄€λ¦¬
* β… μ‚¬μ©μλ³„ νμΌ μ €μ¥μ† μ™„μ „ κ²©λ¦¬

-----

## π› οΈ κΈ°μ  μ¤νƒ

| κµ¬λ¶„                  | κΈ°μ                                                                                               |
| --------------------- | ------------------------------------------------------------------------------------------------- |
| **Backend Framework** | `Java 17`, `Spring Boot 3.2.x`, `Spring Security 6.x`, `Spring Data JPA`, `jjwt 0.11.5`         |
| **Database & Cache** | `MySQL 8.0`, `Redis 7` (μ„Έμ… κ΄€λ¦¬ μμ •)                                                             |
| **Security** | `AES-256-GCM`, `SHA-256`, `BCrypt`, `Google Authenticator`                                        |
| **DevOps** | `Docker & Docker Compose`, `Maven`                                                                |

-----

## π λΉ λ¥Έ μ‹μ‘

### 1\. ν™κ²½ μ”κµ¬μ‚¬ν•­

* Java 17 μ΄μƒ
* Docker & Docker Compose
* Maven 3.6 μ΄μƒ

### 2\. ν”„λ΅μ νΈ ν΄λ΅ 

```bash
git clone https://github.com/yourusername/shieldhub-backend.git
cd shieldhub-backend
```

### 3\. ν™κ²½ μ„¤μ •

`application-example.yml` νμΌμ„ λ³µμ‚¬ν•μ—¬ `application.yml` νμΌμ„ μƒμ„±ν•κ³ , μ£Όμ” μ„¤μ •κ°’μ„ λ³ΈμΈ ν™κ²½μ— λ§κ² μμ •ν•©λ‹λ‹¤.

```bash
cp src/main/resources/application-example.yml src/main/resources/application.yml
```

- **μμ • ν•­λ©:**
   - `app.jwt.secret`: 256λΉ„νΈ(32λ°”μ΄νΈ) JWT μ‹ν¬λ¦Ώ ν‚¤
   - `app.encryption.master-key`: 256λΉ„νΈ(32λ°”μ΄νΈ) μ•”νΈν™” λ§μ¤ν„° ν‚¤
   - `spring.datasource.password`: λ°μ΄ν„°λ² μ΄μ¤ λΉ„λ°€λ²νΈ

### 4\. Docker μ»¨ν…μ΄λ„ μ‹¤ν–‰

`docker-compose.yml` νμΌμ΄ μλ” ν”„λ΅μ νΈ λ£¨νΈμ—μ„ μ•„λ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ λ°μ΄ν„°λ² μ΄μ¤ μ»¨ν…μ΄λ„λ¥Ό μ‹μ‘ν•©λ‹λ‹¤.

```bash
docker-compose up -d
```

### 5\. μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰

Mavenμ„ μ‚¬μ©ν•μ—¬ ν”„λ΅μ νΈλ¥Ό λΉλ“ν•κ³  μ‹¤ν–‰ν•©λ‹λ‹¤.

```bash
mvn clean install
mvn spring-boot:run
```

### 6\. λ™μ‘ ν™•μΈ

μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ‹¤ν–‰λμ—λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

```bash
curl http://localhost:8080/api/test/health
```

"Backend is running\!" λ©”μ‹μ§€κ°€ μ¶λ ¥λλ©΄ μ„±κ³µμ…λ‹λ‹¤.

-----

## π“‘ API λ¬Έμ„

| Method   | Endpoint                          | μ„¤λ…                      | μΈμ¦ ν•„μ” |
| :------- | :-------------------------------- | :------------------------ | :-------: |
| **POST** | `/api/auth/register`              | νμ›κ°€μ…                  |     -     |
| **POST** | `/api/auth/login`                 | μΌλ° λ΅κ·ΈμΈ               |     -     |
| **POST** | `/api/auth/login-with-otp`        | OTP λ΅κ·ΈμΈ                |     -     |
| **POST** | `/api/auth/check-otp`             | OTP ν™μ„±ν™” ν™•μΈ           |     -     |
| **POST** | `/api/auth/logout`                | λ΅κ·Έμ•„μ›ƒ                  |     β…     |
| **PUT** | `/api/auth/change-password`       | λΉ„λ°€λ²νΈ λ³€κ²½             |     β…     |
| **POST** | `/api/auth/reset-password`        | λΉ„λ°€λ²νΈ μ¬μ„¤μ • μ”μ²­      |     -     |
| **DELETE**| `/api/auth/delete-account`      | νμ› νƒν‡΄                 |     β…     |
| **POST** | `/api/otp/setup`                  | OTP μ„¤μ •μ© QR μ½”λ“ μƒμ„±     |     β…     |
| **POST** | `/api/otp/enable`                 | OTP ν™μ„±ν™”                |     β…     |
| **POST** | `/api/otp/disable`                | OTP λΉ„ν™μ„±ν™”              |     β…     |
| **GET** | `/api/otp/status`                 | OTP μƒνƒ ν™•μΈ             |     β…     |
| **POST** | `/api/files/encrypt`              | νμΌ μ•”νΈν™”               |     β…     |
| **POST** | `/api/files/decrypt-upload`       | νμΌ λ³µνΈν™” (μ—…λ΅λ“ λ°©μ‹) |     β…     |
| **POST** | `/api/files/decrypt/{fileId}`     | νμΌ λ³µνΈν™” (DB μ°Έμ΅°)     |     β…     |
| **GET** | `/api/files/list`                 | λ‚΄ νμΌ λ©λ΅ μ΅°ν         |     β…     |

-----

## π“‚ ν”„λ΅μ νΈ κµ¬μ΅°

```
shieldhub-backend/
β”‚
β”β”€β”€ src/main/java/com/shieldhub/backend/
β”‚   β”β”€β”€ config/              # Spring Security, JWT ν•„ν„° λ“± μ„¤μ •
β”‚   β”β”€β”€ controller/          # REST API μ—”λ“ν¬μΈνΈ
β”‚   β”β”€β”€ dto/                 # μ”μ²­(Request) / μ‘λ‹µ(Response) κ°μ²΄
β”‚   β”β”€β”€ entity/              # JPA μ—”ν‹°ν‹° (λ°μ΄ν„°λ² μ΄μ¤ ν…μ΄λΈ” λ§¤ν•‘)
β”‚   β”β”€β”€ repository/          # λ°μ΄ν„° μ ‘κ·Ό κ³„μΈµ (JPA Repository)
β”‚   β”β”€β”€ service/             # ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§
β”‚   β””β”€β”€ util/                # μ•”νΈν™”, JWT λ“± μ ν‹Έλ¦¬ν‹° ν΄λμ¤
β”‚
β”β”€β”€ src/main/resources/
β”‚   β””β”€β”€ application.yml      # Spring Boot μ• ν”λ¦¬μΌ€μ΄μ… μ„¤μ •
β”‚
β”β”€β”€ docker-compose.yml       # Docker μ»¨ν…μ΄λ„ μ„¤μ • (MySQL, Redis)
β”β”€β”€ sql/init.sql             # λ°μ΄ν„°λ² μ΄μ¤ μ΄κΈ°ν™” μ¤ν¬λ¦½νΈ
β””β”€β”€ data/                    # (λ΅μ»¬) μ•”νΈν™” νμΌ μ €μ¥μ†
```

-----

## π” λ³΄μ• κΈ°λ¥

### π—„οΈ νμΌ μ•”νΈν™” ν”„λ΅μ„Έμ¤

1.  μ‚¬μ©μκ°€ νμΌμ„ μ—…λ΅λ“ν•λ©΄ μ„λ²„μ—μ„ λ°”μ΄νΈ λ°°μ—΄λ΅ λ³€ν™ν•©λ‹λ‹¤.
2.  μ›λ³Έ νμΌμ **SHA-256 ν•΄μ‹κ°’**μ„ μƒμ„±ν•μ—¬ λ¬΄κ²°μ„± κ²€μ¦μ©μΌλ΅ κΈ°λ΅ν•©λ‹λ‹¤.
3.  μ•”νΈν•™μ μΌλ΅ μ•μ „ν• \*\*λλ¤ AES-256 ν‚¤(νμΌ ν‚¤)\*\*λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
4.  **AES-GCM λ¨λ“**λ΅ νμΌμ„ μ•”νΈν™”ν•©λ‹λ‹¤. (μ•μ „ν• IV μλ™ ν¬ν•¨)
5.  μ•”νΈν™”λ νμΌμ€ UUID κΈ°λ°μ λλ¤ νμΌλ…μΌλ΅ μ„λ²„μ— μ €μ¥λ©λ‹λ‹¤.
6.  νμΌ μ•”νΈν™”μ— μ‚¬μ©λ **νμΌ ν‚¤**λ¥Ό λ―Έλ¦¬ μ •μλ **λ§μ¤ν„° ν‚¤**λ΅ ν•λ² λ” μ•”νΈν™”ν•©λ‹λ‹¤.
7.  `μ•”νΈν™”λ νμΌ`, `μ•”νΈν™”λ ν‚¤`, `νμΌ μ •λ³΄`λ¥Ό ν•λ‚μ **ZIP νμΌ**λ΅ ν¨ν‚¤μ§•ν•μ—¬ μ‚¬μ©μμ—κ² μ „λ‹¬ν•©λ‹λ‹¤.
8.  κ΄€λ ¨ λ©”νƒ€λ°μ΄ν„°(νμΌλ…, ν•΄μ‹κ°’ λ“±)λ¥Ό DBμ— μ €μ¥ν•κ³  μ΄λ ¥μ„ κΈ°λ΅ν•©λ‹λ‹¤.

### π‘¤ μΈμ¦ ν”„λ΅μ„Έμ¤

1.  μ‚¬μ©μκ°€ ID/PWλ΅ λ΅κ·ΈμΈμ„ μ”μ²­ν•©λ‹λ‹¤.
2.  μ„λ²„λ” **BCrypt**λ΅ ν•΄μ‹λ λΉ„λ°€λ²νΈλ¥Ό λΉ„κµν•μ—¬ μ‚¬μ©μλ¥Ό κ²€μ¦ν•©λ‹λ‹¤.
3.  κ²€μ¦ μ„±κ³µ μ‹, μ‚¬μ©μμ μ •λ³΄λ¥Ό λ‹΄μ€ **JWT**λ¥Ό λ°κΈ‰ν•©λ‹λ‹¤.
4.  ν΄λΌμ΄μ–ΈνΈλ” μ΄ν›„ λ¨λ“  μ”μ²­μ `Authorization` ν—¤λ”μ— JWTλ¥Ό λ‹΄μ•„ μ „μ†΅ν•©λ‹λ‹¤.
5.  μ„λ²„μ **JWT ν•„ν„°**κ°€ ν† ν°μ„ μλ™μΌλ΅ κ²€μ¦ν•κ³  μ‚¬μ©μλ¥Ό μΈμ¦ μ²λ¦¬ν•©λ‹λ‹¤.

-----

## π—ƒοΈ λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§

* **Users**
  ```sql
  - user_id (PK), username (UNIQUE), password_hash, name, email, phone_number, otp_secret, is_otp_enabled, created_at, updated_at
  ```
* **FileMetadata**
  ```sql
  - file_id (PK), file_name, user_id (FK), file_path, file_size, sha256_hash, upload_date
  ```
* **FileHistory**
  ```sql
  - history_id (PK), file_id (FK), action_type (ENCRYPTION/DECRYPTION), timestamp
  ```

-----

## π“ κ°λ° μ§„ν–‰ μƒν™©

| κµ¬λ¶„         | κΈ°λ¥                                | μƒνƒ |
| :----------- | :---------------------------------- | :--: |
| **μΈν”„λΌ** | Docker ν™κ²½ κµ¬μ¶• (MySQL, Redis)     |  β…  |
|              | Spring Boot ν”„λ΅μ νΈ μ„¤μ •           |  β…  |
|              | DB μ¤ν‚¤λ§ μ„¤κ³„ λ° κµ¬ν„              |  β…  |
| **μΈμ¦ μ‹μ¤ν…** | JWT κΈ°λ° ν† ν° μΈμ¦ (Spring Security) |  β…  |
|              | νμ›κ°€μ…/λ΅κ·ΈμΈ/λ΅κ·Έμ•„μ›ƒ            |  β…  |
|              | λΉ„λ°€λ²νΈ λ³€κ²½/μ¬μ„¤μ •                |  β…  |
|              | OTP/2FA (Google Authenticator)      |  β…  |
| **νμΌ λ³΄μ•** | AES-256-GCM μ•”νΈν™”/λ³µνΈν™”           |  β…  |
|              | SHA-256 λ¬΄κ²°μ„± κ²€μ¦                 |  β…  |
|              | νμΌ μ΄λ ¥ κ΄€λ¦¬                      |  β…  |
|              | ZIP ν¨ν‚¤μ§• μ‹μ¤ν…                   |  β…  |
| **μ§„ν–‰ μ¤‘** | Flask λ¨Έμ‹ λ¬λ‹ API μ„λ²„ μ—°λ™        |  β³  |
|              | μ›Ή μ·¨μ•½μ  λ¶„μ„ κΈ°λ¥                 |  β³  |
|              | Redisλ¥Ό μ΄μ©ν• μ„Έμ…/ν† ν° κ΄€λ¦¬       |  β³  |
| **μμ •** | μ΄λ©”μΌ μΈμ¦ μ‹μ¤ν… μ™„μ„±             |  π“…  |
|              | κ΄€λ¦¬μ λ€μ‹λ³΄λ“                     |  π“…  |
|              | λ‹¨μ„ ν…μ¤νΈ μ½”λ“ μ‘μ„±               |  π“…  |

-----

### π§ ν…μ¤νΈ κ³„μ •

κ°λ° λ° ν…μ¤νΈμ© μ΄κΈ° κ³„μ • μ •λ³΄λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

| Username   | Password | Role      |
| :--------- | :------- | :-------- |
| `admin`    | `admin123` | κ΄€λ¦¬μ    |
| `testuser` | `user123`  | μΌλ° μ‚¬μ©μ |

### β οΈ μ£Όμμ‚¬ν•­

* JWT Secret, μ•”νΈν™” λ§μ¤ν„° ν‚¤ λ“± λ―Όκ°ν• μ •λ³΄λ” `.gitignore`μ— ν¬ν•¨λμ–΄ μ†μ¤ μ½”λ“μ— μ§μ ‘ λ…Έμ¶λμ§€ μ•μµλ‹λ‹¤.
* λ΅μ»¬ ν™κ²½μ—μ„ μ‹¤ν–‰ μ‹, `application-example.yml` νμΌμ„ λ³µμ‚¬ν•μ—¬ `application.yml` νμΌμ„ λ°λ“μ‹ μƒμ„±ν•΄μ•Ό ν•©λ‹λ‹¤.
* μ΄μ ν™κ²½μ—μ„λ” λ³΄μ•μ„ μ„ν•΄ ν™κ²½ λ³€μ λλ” μ™Έλ¶€ μ„¤μ • μ„λ²„(Spring Cloud Config λ“±)λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ„ κ°•λ ¥ν κ¶μ¥ν•©λ‹λ‹¤.

-----

### π‘¨β€π’» κ°λ°μ

* **ν‘μƒν** - Backend Developer & Security Engineer