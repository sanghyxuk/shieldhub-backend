server:
  # Render가 할당하는 포트(PORT)를 사용하고, 없으면 8080 사용
  port: ${PORT:8080}

spring:
  application:
    name: shieldhub-backend

  mail:
    host: smtp.gmail.com
    port: 465
    username: devhyxuk@gmail.com
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          ssl:
            enable: true       # SSL 활성화 (465 포트용)
            trust: smtp.gmail.com
          starttls:
            enable: false      # SSL 사용 시 starttls는 꺼야 함
          # [중요 수정] 5000 -> 30000 (30초)로 늘림
          connectiontimeout: 30000
          timeout: 30000
          writetimeout: 30000

  # CORS 설정
  web:
    cors:
      allowed-origins: "http://localhost:3000, https://frontend-chi-lake-23.vercel.app"
      allowed-methods: GET,POST,PUT,DELETE,PATCH,OPTIONS
      allowed-headers: "*"
      allow-credentials: true
      max-age: 3600

  # 이메일 발신자 설정
  app:
    mail:
      from: noreply@shieldhub.com
      from-name: ShieldHub Security

  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    # 배포: Render 환경변수 DB_URL 사용 / 로컬: localhost 사용
    url: ${DB_URL:jdbc:mysql://localhost:3306/shieldhub_db}
    username: ${DB_USERNAME:shieldhub_user}
    password: ${DB_PASSWORD:1234}

  jpa:
    hibernate:
      ddl-auto: update
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        format_sql: true

logging:
  level:
    com.shieldhub.backend: DEBUG
    org.springframework.security: DEBUG

app:
  jwt:
    secret: ${JWT_SECRET:your-256-bit-secret-key-change-this-in-production-very-important}
    expiration: 86400000

  encryption:
    master-key: ${ENCRYPTION_MASTER_KEY:your-256-bit-secret-key-change-this-in-production-very-important}

  file:
    upload-dir: ./data/files/encrypted/uploads

  flask:
    server-url: ${FLASK_API_URL:http://127.0.0.1:5001}