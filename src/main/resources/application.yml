server:
  # Render가 할당하는 포트(PORT)를 사용하고, 없으면 8080 사용
  port: ${PORT:8080}

spring:
  application:
    name: shieldhub-backend

  # [메일 설정] Brevo SMTP (2525 포트)
  mail:
    host: smtp-relay.brevo.com
    port: 2525                     # 2525번 포트 유지
    username: 9c3595001@smtp-brevo.com  # Brevo 아이디 (수정 완료)
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 10000
          timeout: 10000
          writetimeout: 10000

  # [주의] 여기에 app: 설정을 넣으면 안 됩니다! (삭제함)

  # [DB 설정]
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: ${DB_URL:jdbc:mysql://localhost:3306/shieldhub_db}
    username: ${DB_USERNAME:shieldhub_user}
    password: ${DB_PASSWORD:1234}

  # [JPA 설정]
  jpa:
    hibernate:
      ddl-auto: update
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        format_sql: true

  # [CORS 설정]
  web:
    cors:
      allowed-origins: "http://localhost:3000, https://frontend-chi-lake-23.vercel.app"
      allowed-methods: GET,POST,PUT,DELETE,PATCH,OPTIONS
      allowed-headers: "*"
      allow-credentials: true
      max-age: 3600

logging:
  level:
    com.shieldhub.backend: DEBUG
    org.springframework.security: DEBUG

# [커스텀 설정] ★ 여기가 진짜입니다! ★
app:
  mail:
    # [수정 완료] Brevo 가입 이메일(Gmail)로 변경됨
    from: pyosang0919@gmail.com
    from-name: ShieldHub Security

  jwt:
    secret: ${JWT_SECRET:your-256-bit-secret-key-change-this-in-production-very-important}
    expiration: 86400000

  encryption:
    master-key: ${ENCRYPTION_MASTER_KEY:your-256-bit-secret-key-change-this-in-production-very-important}

  file:
    upload-dir: ./data/files/encrypted/uploads

  flask:
    server-url: ${FLASK_API_URL:http://127.0.0.1:5001}